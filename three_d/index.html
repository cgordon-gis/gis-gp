<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Clare Gordon">
  <link rel="canonical" href="https://cgordon-gis.github.io/GIS-gp/three_d/">
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Viewing your data in 3D - GIS for Geophysicists</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  <link href="../css/extra.css" rel="stylesheet" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Viewing your data in 3D";
    var mkdocs_page_input_path = "three_d.md";
    var mkdocs_page_url = "/GIS-gp/three_d/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> GIS for Geophysicists</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../introduction/">Introduction</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../finding_data/">Finding spatial data</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../gps/">Creating point data with GPS</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../creating_data/">Creating data by digitising</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../import_xyz/">Importing point data from xyz files</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../analysis/">Analysing and viewing point data</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../bgs_data/">Using BGS data from Digimap</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../layout/">Layout and presentation</a>
                    </li>
                </ul>
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Viewing your data in 3D</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#learning-outcomes">Learning outcomes</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#data-to-download">Data to download</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#borehole-data">Borehole data</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#download-dtm-files-from-digimap">Download DTM files from Digimap</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#producing-seamless-datasets-from-more-than-one-tile-of-dtm-data">Producing "seamless" datasets from more than one tile of dtm data</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#creating-a-profile-graph">Creating a profile graph</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#using-a-feature-class-for-the-line-on-the-map">Using a feature class for the line on the map</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#saving-the-profile-graph">Saving the profile graph</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#adding-annotation-to-a-profile-graph">Adding annotation to a profile graph</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#further-information">Further information</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#viewing-3d-topography-in-qgis">Viewing 3D topography in QGIS</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#3d-map-view">3D Map View</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#the-qgis2threejs-plugin">The Qgis2threejs plugin</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#installing-the-plugin">Installing the plugin</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#creating-a-3d-view">Creating a 3D view</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#exporting-an-image">Exporting an image</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#extruding-vector-layers">Extruding vector layers</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#further-information_1">Further information</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#recommended-reading-elevation-and-3d-mapping">Recommended reading: Elevation and 3D mapping</a>
    </li>
    </ul>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">GIS for Geophysicists</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Viewing your data in 3D</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/cgordon-gis/GIS-gp/edit/master/docs/three_d.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="viewing-your-data-in-3d">Viewing your data in 3D</h1>
<p>The background to viewing your data in 3D will be covered in the lecture segment at the beginning of the class, and the presentation and any other supporting materials will be available in Minerva.  The lecture segment should help you to understand <strong>why</strong> you are doing these exercises.  If you still aren&rsquo;t sure, please ask <a href="mailto:c.e.gordon@leeds.ac.uk">Clare</a>.</p>
<h2 id="learning-outcomes">Learning outcomes</h2>
<p>When you have completed this section of the workbook you should be able to</p>
<!-- TODO: Intending to cover: profiles; 3D view - quick via native; 3D view via plugin; extruding points - boreholes. -->

<!-- TODO: Students will need to download and merge the Terrain 5 dtm data. -->

<!-- TODO: BUT do GP students actually need to use the DTM? -->

<!-- TODO: Layers to upload to Minerva - Boreholes.csv (more practice at importing csv) -->

<h2 id="introduction">Introduction</h2>
<p>Once you have created features and data in GIS you can view the map in 3D and see how your data relates to other features.  You&rsquo;ll be able to export 3D views from QGIS to include in other reports and layouts.</p>
<h2 id="data-to-download">Data to download</h2>
<h3 id="borehole-data">Borehole data</h3>
<p>Download the <code>Boreholes.csv</code> file from Minerva and load into QGIS using the instructions you used to <a href="/import_xyz/#import-points-from-xyz-file-to-qgis">load the gravity data points</a>.</p>
<h3 id="download-dtm-files-from-digimap">Download DTM files from Digimap</h3>
<p>You&rsquo;ll need to start by obtaining height data from Digimap and converting it for use in QGIS.</p>
<p><strong>DTM</strong> stands for Digital Terrain Model.  You may also come across <strong>DEM</strong> which stands for Digital Elevation Model.  There are differences in the data but both can be treated in the same way.</p>
<p>Use <a href="/finding_data/#downloading-data-from-digimap">Digimap O.S. Data Download</a></p>
<ul>
<li>Search for <code>Llanbedr</code> - it&rsquo;s the one in Gwynedd - and download data for at least the area shown below (a bit more than this doesn&rsquo;t matter, but don&rsquo;t download too much or the processing will take ages):</li>
</ul>
<p><img alt="The area for which to download data - OS Terrain 5 DTM." src="../images/analysis/DigimapDownloadDTM.png" title="The area for which to download data - OS Terrain 5 DTM." /></p>
<ul>
<li>When selecting data products go to <code>Land and Height Data</code> and select <code>OS Terrain 5 DTM</code> - make sure you select the DTM not the contours.</li>
<li>Once you have the data in the basket select the download format as <code>ASC</code></li>
</ul>
<p>Save the resulting download to your disk and unzip it.</p>
<h2 id="producing-seamless-datasets-from-more-than-one-tile-of-dtm-data">Producing &ldquo;seamless&rdquo; datasets from more than one tile of dtm data</h2>
<p>If you are using more than one tile of dtm data (which you should be for this exercise) follow the instructions below to combine the multiple files into one single one.  This will make it possible to use the files as a continuous surface in maps and 3D scenes.  During this process we will also convert the multiple asc or tif files into one single <code>tiff</code> file.</p>
<ul>
<li>If QGIS isn&rsquo;t already open, open it now.</li>
<li>Use the Browser panel to find the dtm files that you downloaded from Digimap and check the <code>Layer Properties</code> of one of the <code>.asc</code> files.</li>
<li>In particular look for the<code>CRS</code> and the <code>Data type</code> and make a note of both then close the layer properties.</li>
</ul>
<p><img alt="The layer properties for one of the .asc dtm files.  Note particularly the CRS and the Data type - you'll need these later." src="../images/three_d/DTMLayerProperties_small.png" title="The layer properties for one of the .asc dtm files.  Note particularly the CRS and the Data type - you'll need these later." /></p>
<ul>
<li>Go to <code>Raster &gt; Miscellaneous &gt; Merge...</code></li>
</ul>
<p>This opens one of the QGIS tools.</p>
<ul>
<li>In the Merge dialog click on the three dots button next to the <code>Input Layers</code></li>
<li>Click on <code>Add File(s)...</code> and navigate to the folder containing your dtm data</li>
<li>Use the dropdown next to <code>File name:</code> to select <code>Arc/Info ASCII Grid (*.asc *.ASC)</code> - this will restrict the files that you&rsquo;ll see to just that extension</li>
<li>Add all of the files with an extension of <code>.asc</code> by selecting them and clicking on <code>Open</code>.  They should appear on a list and each of them should be ticked.</li>
<li>Click on <code>OK</code> to add them to the tool.</li>
</ul>
<p>The <code>Input layers</code> field of the Merge dialog should now tell you the number of input layers that you have added.</p>
<ul>
<li>For the <code>Output data type</code> select the data type that you found in the Layer Properties above.  In my case this is <code>Float64</code></li>
<li>Go down to the <code>Merged</code> field which currently says <code>[Save to temporary file]</code> and use the button at the end of the field to select <code>Save to file...</code></li>
<li>Browse to the folder in which you want to store the file and give it a name, such as <code>MergedDTM</code></li>
<li>The file will automatically be given the extension of <code>tif</code></li>
<li>Click <code>Save</code></li>
<li>Then click to <code>Run</code></li>
</ul>
<p><img alt="The Merge dialog for raster tiles." src="../images/three_d/MergeDTM_small.png" title="The Merge dialog for raster tiles." /></p>
<p>The tool should run and add a new layer to your map.  You can <code>Close</code> the dialog when it runs successfully.</p>
<p><img alt="Part of the merged DTM - it should look like a single continuous greyscale file." src="../images/three_d/MergedDTM_small.png" title="Part of the merged DTM - it should look like a single continuous greyscale file." /></p>
<p>Check that the file looks OK, and also check that the coordinate reference system is set correctly</p>
<ul>
<li>Right-click on the layer and go to <code>Properties</code></li>
<li>Look at the <code>Information</code> tab and check that the <code>CRS</code> is correct.</li>
</ul>
<p>If it isn&rsquo;t you will need to <a href="/gps/#changing-the-coordinate-system-crs-of-data">reproject the file to the same CRS as your map</a>.</p>
<p>You don&rsquo;t need this layer to be visible so move it to the bottom of the list in the Layers panel and turn it off.</p>
<h2 id="creating-a-profile-graph">Creating a profile graph</h2>
<p>QGIS enables you to draw a profile graph across your map using <code>z values</code> in your surface raster files or heights above sea-level.  You now have both of these layers on your map so can try both of them.</p>
<ul>
<li>You&rsquo;ll need to start by installing the <code>Profile tool</code> plugin by going to <code>Plugins &gt; Plugin Manager</code> in the same way as you <a href="/gps/#installing-qgis-plugin-to-display-a-background-map">installed the QuickMapServices plugin</a>.</li>
<li>Once you have the plugin installed you will gain a button on the toolbar which has the tooltip <code>Terrain profile</code></li>
</ul>
<p><img alt="The Terrain Profile button from the toolbar." src="../images/three_d/TerrainProfileButton_small.png" title="The Terrain Profile button from the toolbar." /></p>
<ul>
<li>Click on the <code>Terrain Profile</code> button</li>
</ul>
<p>The Profile Tool window should open at the bottom of your screen.</p>
<p>The first thing you need to do is select the layer that contains your <code>z</code> or height data.  In this case you have two possible layers on your map.</p>
<ul>
<li>Select your gravity surface in the Layers panel - mine is called <code>IDWgrav</code> yours may be something different</li>
<li>On the Profile Tool panel click <code>Add Layer</code> under the box on the right - the layer should appear in the box</li>
<li>Now check that under <code>Options</code> the <code>Selection</code> is set to <code>Temporary polyline</code></li>
<li>Left-click somewhere on the map on the west of your gravity layer</li>
<li>Then double-click (to end the line) somewhere on the east of your gravity layer</li>
</ul>
<p>Immediately a profile should be drawn in the window on the Profile tool panel.</p>
<p><img alt="The profile tool panel showing a profile across the IDWgrav layer from west to east." src="../images/three_d/ProfileToolPanel_small.png" title="The profile tool panel showing a profile across the IDWgrav layer from west to east." /></p>
<blockquote>
<p><img alt="Instruction" src="../images/svg/create-black-24dp.png" /> <strong>Adding a second elevation surface</strong></p>
<p>Now try adding the <code>MergedDTM</code> layer too (you may have called it something different).  You do it in exactly the same way, except that you already have a line across your map.</p>
<p>If you click on the colour patch next to the MergedDTM layer you can change it to a different colour so you can see which profile refers to which data surface.</p>
</blockquote>
<p>Unfortunately it isn&rsquo;t possible to edit the y axes independently so that you have the two profiles on different scales.</p>
<ul>
<li>For the assessment you only need to include the profile across the gravity surface, so for now click on <code>Remove Layer</code> and remove the DTM layer.</li>
</ul>
<h3 id="using-a-feature-class-for-the-line-on-the-map">Using a feature class for the line on the map</h3>
<p>So far you&rsquo;ve only used a temporary line on the map for the line of the profile.  When you close your map this line will disappear.  If you are going to include the profile on the map layout you also need to show the line of the profile on the map.  To do this you can <a href="/creating_data/#setting-up-geopackage-feature-classes-to-store-your-data">create a feature class</a> and <a href="/creating_data/#digitising-line-features">digitise a line across the map</a>.  Refer back to the chapter on <a href="/creating_data/">Creating data by digitising</a> for a reminder of how to do this.</p>
<p>Once you have a digitised line</p>
<ul>
<li>Select the line layer in the Layers panel and then use <code>Select Features by Area or Single Click</code> from the toolbar at the top to click on the line and select it (it should turn bright yellow)</li>
<li>Open the Profile Graph panel and add your gravity surface as before</li>
<li>Under <code>Selection</code> click on <code>Selected polyline</code> or <code>Selected layer</code></li>
</ul>
<p>The Profile should appear in the window to the left.</p>
<h3 id="saving-the-profile-graph">Saving the profile graph</h3>
<p>You can save your profile graph to an image to add to other work</p>
<ul>
<li>It&rsquo;s a good idea to untick <code>Show Cursor</code> before you save the graph</li>
<li>Use the dropdown at the bottom of the profile to select <code>Graph - PNG</code></li>
<li>Then click on the <code>Save as</code> button</li>
<li>Navigate to where you want to save the graph and give it a name.</li>
</ul>
<p>The result png file can be added to reports or map layouts - but see below.</p>
<p>If you have selected a line on the map it is a good idea to <code>Clear selections</code> once you have saved the graph.</p>
<h3 id="adding-annotation-to-a-profile-graph">Adding annotation to a profile graph</h3>
<p>This plugin is fairly basic.  It simply allows you to draw a line across a map and show the profile.  If you are going to include a profile graph on a map layout or in a report you will need to annotate it with titles, labels etc.</p>
<p>To do this you need to save the graph as <code>SVG</code> format</p>
<ul>
<li>It&rsquo;s a good idea to untick <code>Show Cursor</code> before you save the graph</li>
<li>Use the dropdown at the bottom of the profile to select <code>Graph - SVG</code></li>
<li>Then click on the <code>Save as</code> button</li>
<li>Navigate to where you want to save the graph and give it a name.</li>
</ul>
<p>Once you have the SVG format graph you can open it in a vector graphics program, such as <a href="https://inkscape.org/">Inkscape</a><sup id="fnref:901"><a class="footnote-ref" href="#fn:901">1</a></sup>, CorelDraw or Adobe Illustrator, then edit it as required.</p>
<h3 id="further-information">Further information</h3>
<ul>
<li>For a video on the Profile plugin see <a href="https://youtu.be/UD0Oumv5y1w">Using the Profile Tool plugin in QGIS</a> by Hans van der Kwast.</li>
</ul>
<h2 id="viewing-3d-topography-in-qgis">Viewing 3D topography in QGIS</h2>
<p>Sometimes being able to view your data in 3D can really help you to interpret it.  QGIS has a couple of effective ways of allowing you to do this.</p>
<ul>
<li>Start with your map set up to show the 1:25 000 background map and the gravity surface.</li>
<li>Make sure you have the merged DTM in your project, but it doesn&rsquo;t need to be visible.</li>
</ul>
<h3 id="3d-map-view">3D Map View</h3>
<p>The simplest way to view a map in 3D is to use the inbuilt tool.  This is fine, but fairly limited.</p>
<ul>
<li>Click on <code>View &gt; New 3D Map View</code></li>
</ul>
<p>On my computer this always opens far too small so I have to use the mouse to extend the window.</p>
<p>The initial view looks the same as the map in the main view.  You have to tell it where to get the 3D elevation data from.</p>
<ul>
<li>Click on the button with the little spanner on the toolbar - this gives you the <code>3D Configuration</code> window.</li>
<li>Select <code>Terrain</code></li>
<li>Drop down the <code>Type</code> box and select <code>DEM (Raster Layer)</code></li>
<li>In the <code>Elevation</code> box select your merged DTM layer.</li>
<li>Click <code>OK</code></li>
</ul>
<p><img alt="The 3D configuration settings set up to show the terrain (DTM)." src="../images/three_d/3DConfiguration_small.png" title="The 3D configuration settings set up to show the terrain (DTM)." /></p>
<p>You should notice a slight difference, but as you are still looking down on the view from above you won&rsquo;t see the full 3D effect yet.</p>
<p>Use the mouse wheel and buttons, or the controls in the top right of the window to have a look at your 3D scene.</p>
<p>You can try out some of the other settings from the 3D Configuration settings to see what happens.</p>
<p>It is possible to export this view as an image</p>
<ul>
<li>click on the <code>Save as image...</code> button on the toolbar.</li>
</ul>
<p>Close the view by clicking on the cross at top right.</p>
<h2 id="the-qgis2threejs-plugin">The Qgis2threejs plugin</h2>
<p>QGIS has a plugin which gives more options for viewing your data in 3D, including extruding vector layers, and it is worth installing this and trying it out.</p>
<h3 id="installing-the-plugin">Installing the plugin</h3>
<ul>
<li>Install the <code>Qgis2threejs</code> plugin in the same way you&rsquo;ve used for other plugins</li>
</ul>
<p><img alt="Installing the Qgis2threejs plugin." src="../images/three_d/InstallQgis2threejsPlugin_small.png" title="Installing the Qgis2threejs plugin." /></p>
<h3 id="creating-a-3d-view">Creating a 3D view</h3>
<blockquote>
<p><img alt="Warning" src="../images/svg/warning-black-24dp.png" /> <strong>Warning</strong></p>
<p>Note that if you have already run the QGIS 3D viewer you will need to close it, then close QGIS and reopen your map before you run the Qgis2threejs plugin.</p>
</blockquote>
<ul>
<li>You can open the plugin either by clicking on the button on the toolbar or by going to <code>Web &gt; Qgis2threejs &gt; Qgis2threejs Exporter</code></li>
</ul>
<p>The window that opens will have a blank main window and a list of your layers on the left.</p>
<ul>
<li>Under the <code>DEM</code> heading in the layers on the left click to put a tick next to your merged DTM layer (remember to some extent DEM and DTM are the same thing).</li>
</ul>
<p>Your map should appear and should already be shown as a 3D view.</p>
<p><img alt="The Qgis2threejs exporter with the Merged DTM ticked in the Layers." src="../images/three_d/Qgis2threejsExporter_small.png" title="The Qgis2threejs exporter with the Merged DTM ticked in the Layers." /></p>
<ul>
<li>Use your mouse to navigate in the scene.  The mouse wheel will let you zoom in and out.  If you click on the map you get a pop-up menu with the coordinates at that point and an option to zoom in to that point or orbit around it (press <code>Esc</code> to stop orbiting).  Just have a go!</li>
<li>Press <code>F5</code> (reset) to get back to the original view</li>
<li>Go to <code>Scene &gt; Scene settings...</code>.  In this view you can change the <code>Vertical exaggeration</code> - set it to <code>3.0</code> and click <code>Apply</code> to see what happens.  Use this setting with care - for a scientific map it&rsquo;s usually best to stay at <code>1.0</code> which is the actual vertical setting.</li>
</ul>
<h3 id="exporting-an-image">Exporting an image</h3>
<p>Once you have a view that shows your data in a way that will enhance the interpretation you can export it as an image.  The image can then be included in reports and map layouts.</p>
<ul>
<li><code>File &gt; Save Scene as... &gt; Image (.png)</code></li>
<li>You can change the output size here if you wish, then click on <code>Save</code></li>
<li>Navigate to wherever you wish to save the image and give it a name then click on <code>Save</code>.</li>
</ul>
<h3 id="extruding-vector-layers">Extruding vector layers</h3>
<p>It is possible to show vector layers in 3D.  A popular use for this is to extrude building polygons if you have the height of the roof.  In this case we&rsquo;ll extrude the depth of boreholes for this area.</p>
<ul>
<li>At the beginning of this chapter you downloaded borehole data for Llanbedr from Minerva in the form of a csv file.  If you haven&rsquo;t already added this to your map do so now.  Remember that you&rsquo;ll need to add this in the <a href="/import_xyz/#import-points-from-xyz-file-to-qgis">same way that you did the gravity points</a>.</li>
<li>Have a look at the attribute table and in particular the <code>LENGTH</code> field - this is the depth of the borehole below ground-level.</li>
</ul>
<p>Now you have the vector layer ready to extrude.</p>
<ul>
<li>Open the Qgis2threejs plugin again.  Your borehole layer should be visible in the left-hand menu now.</li>
<li>Put a tick in the box next to the layer.  You should be able to see a series of spheres above your map.</li>
<li>Right-click on the boreholes layer in the Layers list and go to <code>Properties</code><ul>
<li>Change the <code>Object type</code> to <code>Cylinder</code></li>
<li>Under <code>Z coordinate</code> change <code>Mode</code> to <code>Relative to "MergedDTM" layer</code> (or whatever your DTM layer is called)</li>
<li>Under <code>Style</code> you can change the colour and opacity</li>
<li>Under the <code>Height</code> box drop down the box and select the <code>HEIGHT</code> field</li>
</ul>
</li>
<li>If you click <code>Apply</code> now you should see your points extruded above the map.  But these are boreholes - they should go downwards&hellip;<ul>
<li>The <code>Height</code> field is set to <code>Expression</code> so there is an <code>E</code> symbol on a button to the right of the field.  Click on this now and enter the following expression.</li>
</ul>
</li>
</ul>
<blockquote>
<p>&ldquo;LENGTH&rdquo; * -1</p>
</blockquote>
<ul>
<li>Once you&rsquo;ve done that click <code>OK</code> and then click on <code>OK</code> again.</li>
</ul>
<p><img alt="The properties dialog for the extruded layer." src="../images/three_d/BoreholesProperties_small.png" title="The properties dialog for the extruded layer." /></p>
<p>Your cylinders should disappear leaving only a patch on the terrain. If you use the mouse to navigate to under the land surface you will be able to see the longest borehole - this is the <a href="https://webapps.bgs.ac.uk/data/publications/pubs.cfc?method=viewRecord&amp;publnId=19864509">Mochras Borehole</a>.  But what about the others?</p>
<ul>
<li>Right-click on the DTM layer in the Layers list and go to <code>Properties</code></li>
<li>Untick <code>Build sides</code> and tick <code>Build frame</code></li>
<li>Click <code>OK</code></li>
</ul>
<p>Your scene should redraw and you should be able to see all of the points extruded downwards.  You can make these more obvious by changing the expression in the properties of the point layer to increase all of them, e.g. by doing <code>* -2</code> instead of <code>* -1</code>, but that does make the Mochras Borehole very long indeed!</p>
<p><img alt="The extruded boreholes seen from below the map." src="../images/three_d/BoreholesBelow_small.png" title="The extruded boreholes seen from below the map." /></p>
<p>Again, this can be exported as an image by going to <code>File &gt; Save scene as... &gt; Image (.png)</code>.</p>
<h3 id="further-information_1">Further information</h3>
<ul>
<li>If you want to find out more about Qgis2threejs see the <a href="http://www.statsmapsnpix.com/2018/11/how-to-create-interactive-3d-landscape.html">tutorial by Alasdair Rae</a>.</li>
</ul>
<h2 id="recommended-reading-elevation-and-3d-mapping">Recommended reading: Elevation and 3D mapping</h2>
<p>The general books in the module reading list<sup id="fnref:1010"><a class="footnote-ref" href="#fn:1010">2</a></sup> include sections on elevation and 3D mapping.</p>
<ul>
<li>For a quick overview look at Darkes (2017) - pages 46-47 look at Relief.</li>
<li>Heywood (2011) has a section on Modelling the Third Dimension on pages 99-100.</li>
<li>Longley (2015) covers User Interation and Representation in 2.5-D and 3-D on pages 282-284.</li>
</ul>
<div class="footnote">
<hr />
<ol>
<li id="fn:901">
<p><a href="https://inkscape.org/">Inkscape</a> is OpenSource and freely available to download and install on Windows, Mac and Linux.  If you want to learn how to use it I have created <a href="https://cgordon-gis.github.io/downloads.htm#heading_toc_j_2">Interactive Inkscape worksheets</a> which can be downloaded from my website.&#160;<a class="footnote-backref" href="#fnref:901" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:1010">
<p>Reading list available from Minerva and from the module catalogue.&#160;<a class="footnote-backref" href="#fnref:1010" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
</ol>
</div>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="../layout/" class="btn btn-neutral" title="Layout and presentation"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>&copy; Clare Gordon, University of Leeds 2020. This work is licensed under the Creative Commons Attribution-NonCommercial-Sharealike 4.0 International Licence.  To view a copy of this licence visit <a href="http://creativecommons.org/licences/by-nc-sa/4.0/" >http://creativecommons.org/licenses/by-nc-sa/4.0/</a> <br /> Icons downloaded from <a href="http://google.github.io/material-design-icons/">Materials Icons</a></p>
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/cgordon-gis/GIS-gp/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../layout/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
